# SPDX-FileCopyrightText: Â© 2024 Xronos Inc.
# SPDX-License-Identifier: BSD-3-Clause
---
- name: apt install aptitude
  ansible.builtin.apt:
    pkg:
      - aptitude
    state: "{{ ubuntu_apt_upgrade | ternary('latest', 'present') }}"
  become: true

- name: apt install prerequisites
  ansible.builtin.apt:
    pkg:
     - apt-transport-https
     - ca-certificates
     - software-properties-common
    state: "{{ ubuntu_apt_upgrade | ternary('latest', 'present') }}"
  become: true

- name: apt upgrade packages
  ansible.builtin.apt:
    upgrade: true
  become: true
  when: ubuntu_apt_upgrade

- name: apt autoremove
  ansible.builtin.apt:
    autoremove: true
    purge: true
  become: true
  when: ubuntu_apt_upgrade